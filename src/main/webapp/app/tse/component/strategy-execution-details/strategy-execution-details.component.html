<div class="row" *ngIf="!viewDataIsInitialized()">
    <div class="col-sm-12">Loading...</div>
</div>

<div class="row mb-4" *ngIf="viewDataIsInitialized()">
    <div class="col-sm-12 col-lg-4">
        <h3>Strategy execution details</h3>
        <button type="button" class="btn btn-md btn-primary btn-block mt-3" (click)="stopStrategyExecution()">Stop</button>
    </div>
</div>

<div class="row" *ngIf="viewDataIsInitialized()">
    <div class="col-sm-12 col-lg-6 mb-4">
        <div class="card bg-light custom-card">
            <div class="card-body">
                <h4>General information</h4>
                <table class="table">
                    <tbody>
                        <tr>
                            <th scope="row">Id</th>
                            <td>{{strategyExecution?.id}}</td>
                        </tr>
                        <tr>
                            <th scope="row">Order execution type</th>
                            <td>{{strategyExecution?.orderExecutionType}}</td>
                        </tr>
                        <tr>
                            <th scope="row">Symbols</th>
                            <td>{{strategyExecution?.symbols}}</td>
                        </tr>
                        <tr>
                            <th scope="row">Funds per trade</th>
                            <td>{{strategyExecution?.fundsPerTrade}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-lg-6 mb-4">
        <div class="card bg-light custom-card">
            <div class="card-body">
                <h4>Rules</h4>
                <table class="table">
                    <tbody>
                        <tr>
                            <th scope="row">Entry</th>
                            <td>
                                <p *ngFor="let line of strategyExecution?.entryRuleDescription">{{line}}</p>
                            </td>
                        </tr>
                        <tr>
                            <th scope="row">Exit</th>
                            <td>
                                <p *ngFor="let line of strategyExecution?.exitRuleDescription">{{line}}</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-lg-6 mb-4">
        <div class="card bg-light custom-card">
            <div class="card-body">
                <h4>Performance metrics</h4>
                <table class="table">
                    <tbody>
                        <tr>
                            <th scope="row">N trades:</th>
                            <td>{{report?.ntrades}}</td>
                        </tr>
                        <tr>
                            <th scope="row">N closed trades:</th>
                            <td>{{report?.nclosedTrades}}</td>
                        </tr>
                        <tr>
                            <th scope="row">N profitable trades:</th>
                            <td>{{report?.nprofitableTrades}}</td>
                        </tr>
                        <tr>
                            <th scope="row">Total profit:</th>
                            <td>{{report?.totalProfit}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-lg-6 mb-3">
        <div class="card bg-light custom-card">
            <div class="card-body">
                <h4>Equity curve</h4>
                <apx-chart
                    [series]="chartOptions.series"
                    [chart]="chartOptions.chart"
                    [xaxis]="chartOptions.xaxis"
                    [stroke]="chartOptions.stroke"
                    [dataLabels]="chartOptions.dataLabels"
                    [yaxis]="chartOptions.yaxis"
                    [labels]="chartOptions.labels"
                    [legend]="chartOptions.legend"
                ></apx-chart>
            </div>
        </div>
    </div>
</div>
